# ä¸­æ–‡ç°¡ç¹è½‰æ›åŠŸèƒ½

## ğŸ¯ åŠŸèƒ½èªªæ˜

ç•¶é¸æ“‡èªè¨€ç‚º **Chinese (zh)** æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•å°‡ Whisper è¼¸å‡ºçš„ç°¡é«”ä¸­æ–‡è½‰æ›æˆ**ç¹é«”ä¸­æ–‡ï¼ˆå°ç£æ¨™æº–ï¼‰**ã€‚

### ç‚ºä»€éº¼éœ€è¦é€™å€‹åŠŸèƒ½ï¼Ÿ

Whisper æ¨¡å‹ä¸»è¦è¼¸å‡º**ç°¡é«”ä¸­æ–‡**ï¼Œä½†è¨±å¤šå°ç£ã€é¦™æ¸¯ã€æ¾³é–€çš„ä½¿ç”¨è€…éœ€è¦**ç¹é«”ä¸­æ–‡**å­—å¹•ã€‚é€™å€‹åŠŸèƒ½æœƒè‡ªå‹•å®Œæˆè½‰æ›ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹é»

### 1. è‡ªå‹•åµæ¸¬
- åªæœ‰ç•¶èªè¨€é¸æ“‡ `zh` æ™‚æ‰æœƒé€²è¡Œè½‰æ›
- å…¶ä»–èªè¨€ä¸å—å½±éŸ¿

### 2. é«˜æº–ç¢ºåº¦
- ä½¿ç”¨ **OpenCC** (Open Chinese Convert)
- å°ç£æ¨™æº–è©å½™ï¼ˆs2tw è½‰æ›é…ç½®ï¼‰
- æº–ç¢ºè™•ç†å°ˆæ¥­è¡“èª

### 3. ç„¡ç¸«æ•´åˆ
- å–® GPU å’Œå¤š GPU æ¨¡å¼éƒ½æ”¯æŒ
- ä¸å½±éŸ¿è™•ç†é€Ÿåº¦
- è‡ªå‹•è™•ç†ï¼Œç„¡éœ€æ‰‹å‹•æ“ä½œ

---

## ğŸ“Š è½‰æ›ç¯„ä¾‹

### ç¯„ä¾‹ 1ï¼šä¸€èˆ¬æ–‡å­—
```
ç°¡é«”ï¼šè¿™æ˜¯è¯­éŸ³è¯†åˆ«ç³»ç»Ÿ
ç¹é«”ï¼šé€™æ˜¯èªéŸ³è­˜åˆ¥ç³»çµ±
```

### ç¯„ä¾‹ 2ï¼šå°ˆæ¥­è¡“èª
```
ç°¡é«”ï¼šä½¿ç”¨è®¡ç®—æœºè¿›è¡Œæ•°æ®å¤„ç†
ç¹é«”ï¼šä½¿ç”¨é›»è…¦é€²è¡Œè³‡æ–™è™•ç†
```

### ç¯„ä¾‹ 3ï¼šæ··åˆæ–‡å­—
```
ç°¡é«”ï¼šHello, æ¬¢è¿ä½¿ç”¨ Whisper ASR ç³»ç»Ÿ
ç¹é«”ï¼šHello, æ­¡è¿ä½¿ç”¨ Whisper ASR ç³»çµ±
```

### ç¯„ä¾‹ 4ï¼šé†«å­¸è¡“èª
```
ç°¡é«”ï¼šæ‚£è€…éœ€è¦è¿›è¡Œè¡€æ¶²æ£€æŸ¥å’Œæ ¸ç£å…±æŒ¯æˆåƒ
ç¹é«”ï¼šæ‚£è€…éœ€è¦é€²è¡Œè¡€æ¶²æª¢æŸ¥å’Œæ ¸ç£å…±æŒ¯é€ å½±
```

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ­¥é©Ÿ 1ï¼šé¸æ“‡èªè¨€
åœ¨ Web UI çš„ **Language** ä¸‹æ‹‰é¸å–®ä¸­é¸æ“‡ `zh` (Chinese)

### æ­¥é©Ÿ 2ï¼šä¸Šå‚³éŸ³è¨Š
ä¸Šå‚³ä¸­æ–‡éŸ³è¨Šæˆ–è¼¸å…¥ YouTube é€£çµ

### æ­¥é©Ÿ 3ï¼šé–‹å§‹è½‰éŒ„
é»æ“Š **ğŸš€ Start** æŒ‰éˆ•

### æ­¥é©Ÿ 4ï¼šè‡ªå‹•è½‰æ›
ç³»çµ±æœƒï¼š
1. è½‰éŒ„éŸ³è¨Šï¼ˆè¼¸å‡ºç°¡é«”ä¸­æ–‡ï¼‰
2. **è‡ªå‹•è½‰æ›æˆç¹é«”ä¸­æ–‡**
3. ç”Ÿæˆç¹é«”ä¸­æ–‡å­—å¹•

---

## ğŸ“ æ—¥èªŒè¼¸å‡º

### å–® GPU æ¨¡å¼

```bash
ğŸ“Š Audio loaded: 180.5s
ğŸ¯ VAD detected 12 speech segments
[GPU 0] â–¶ Processing chunk 1/12
...
[GPU 0] âœ“ Chunk 12 complete
âœ… Transcription complete!
ğŸ”„ Converting to Traditional Chinese...    â† ç°¡ç¹è½‰æ›
âœ… Converted to Traditional Chinese        â† è½‰æ›å®Œæˆ
   Device: GPU 0
   Segments: 127
   Speed: 9.9x realtime
```

### å¤š GPU æ¨¡å¼

```bash
ğŸš€ Starting parallel transcription on 4 GPUs...
[GPU 0] â–¶ Processing segment 0
[GPU 1] â–¶ Processing segment 1
...
âœ… Complete! 247 text segments
ğŸ”„ Converting to Traditional Chinese...    â† ç°¡ç¹è½‰æ›
âœ… Converted to Traditional Chinese        â† è½‰æ›å®Œæˆ
Speed: 26.5x realtime
```

---

## ğŸ”§ æŠ€è¡“ç´°ç¯€

### ä½¿ç”¨çš„å·¥å…·

**OpenCC (Open Chinese Convert)**
- é–‹æºçš„ä¸­æ–‡ç°¡ç¹è½‰æ›å·¥å…·
- æ”¯æŒå¤šç¨®è½‰æ›æ¨™æº–
- é«˜æº–ç¢ºåº¦çš„è©å½™å°æ‡‰

### è½‰æ›é…ç½®

ä½¿ç”¨ `s2tw` é…ç½®ï¼š
- **s**: Simplifiedï¼ˆç°¡é«”ï¼‰
- **tw**: Traditional Taiwanï¼ˆç¹é«”å°ç£æ¨™æº–ï¼‰

### å…¶ä»–å¯ç”¨é…ç½®

å¦‚æœéœ€è¦å…¶ä»–æ¨™æº–ï¼Œå¯ä»¥ä¿®æ”¹ `chinese_converter.py`ï¼š

```python
# å°ç£æ¨™æº–ï¼ˆç•¶å‰ï¼‰
self.converter = OpenCC('s2tw')

# é¦™æ¸¯æ¨™æº–
# self.converter = OpenCC('s2hk')

# é€šç”¨ç¹é«”
# self.converter = OpenCC('s2t')

# å°ç£æ¨™æº–å«æˆèª
# self.converter = OpenCC('s2twp')
```

---

## ğŸ“¦ ä¾è³´å¥—ä»¶

å·²æ·»åŠ åˆ° `requirements.txt`ï¼š

```
opencc-python-reimplemented>=0.1.7
```

**ç‰¹é»**ï¼š
- ç´” Python å¯¦ç¾
- ç„¡éœ€ç·¨è­¯
- è·¨å¹³å°ç›¸å®¹

---

## ğŸ” é©—è­‰åŠŸèƒ½

### æ¸¬è©¦æ­¥é©Ÿ

1. **ä¸Šå‚³ä¸­æ–‡éŸ³è¨Š**ï¼ˆæˆ–ä½¿ç”¨ YouTube ä¸­æ–‡å½±ç‰‡ï¼‰

2. **é¸æ“‡èªè¨€**ï¼š`zh` (Chinese)

3. **æŸ¥çœ‹è¼¸å‡º**ï¼š
   ```
   å­—å¹•æ‡‰è©²æ˜¯ç¹é«”ä¸­æ–‡
   ä¾‹å¦‚ï¼šã€Œé€™ã€è€Œä¸æ˜¯ã€Œè¿™ã€
   ```

4. **æŸ¥çœ‹æ—¥èªŒ**ï¼š
   ```bash
   docker logs whisper-for-subs | grep "Converting to Traditional"
   ```
   æ‡‰è©²çœ‹åˆ°ï¼š
   ```
   ğŸ”„ Converting to Traditional Chinese...
   âœ… Converted to Traditional Chinese
   ```

---

## ğŸš€ éƒ¨ç½²

### æ–¹æ³• 1ï¼šå¿«é€Ÿéƒ¨ç½²

```bash
cd /Users/winston/Projects/whisper-for-subs

# ä½¿ç”¨éƒ¨ç½²è…³æœ¬
bash tmp/deploy_chinese_conversion.sh
```

### æ–¹æ³• 2ï¼šæ‰‹å‹•éƒ¨ç½²

```bash
cd /Users/winston/Projects/whisper-for-subs

# é‡æ–°å»ºç½®å®¹å™¨ï¼ˆæœƒå®‰è£æ–°çš„ä¾è³´ï¼‰
docker compose down
docker compose build
docker compose up -d

# æŸ¥çœ‹æ—¥èªŒ
docker compose logs -f
```

---

## âš™ï¸ é€²éšé…ç½®

### è‡ªè¨‚è½‰æ›æ¨™æº–

ç·¨è¼¯ `chinese_converter.py` ç¬¬ 22 è¡Œï¼š

```python
# ç•¶å‰ï¼šå°ç£æ¨™æº–
self.converter = OpenCC('s2tw')

# æ”¹æˆé¦™æ¸¯æ¨™æº–
self.converter = OpenCC('s2hk')

# æˆ–é€šç”¨ç¹é«”
self.converter = OpenCC('s2t')
```

### ç¦ç”¨è½‰æ›

å¦‚æœä¸æƒ³è¦è‡ªå‹•è½‰æ›ï¼Œå¯ä»¥åœ¨ `app.py` ä¸­è¨»è§£æ‰ç›¸é—œä»£ç¢¼ï¼š

```python
# è¨»è§£æ‰é€™æ®µ
# if language == "zh":
#     converter = get_converter()
#     if converter.is_available():
#         ...
```

---

## ğŸ“Š æ€§èƒ½å½±éŸ¿

ç°¡ç¹è½‰æ›å°æ€§èƒ½çš„å½±éŸ¿ï¼š

| æ®µè½æ•¸ | è½‰æ›æ™‚é–“ | å½±éŸ¿ |
|--------|---------|------|
| 100 | < 0.1s | å¯å¿½ç•¥ |
| 500 | < 0.5s | å¾ˆå° |
| 1000 | < 1s | å° |

**çµè«–**ï¼šè½‰æ›é€Ÿåº¦éå¸¸å¿«ï¼Œä¸æœƒæ˜é¡¯å½±éŸ¿æ•´é«”è™•ç†æ™‚é–“ã€‚

---

## ğŸ› æ•…éšœæ’é™¤

### å•é¡Œ 1ï¼šè½‰æ›å™¨æœªè¼‰å…¥

**ç—‡ç‹€**ï¼š
```
âš ï¸  Chinese converter not available, skipping conversion
```

**è§£æ±º**ï¼š
```bash
# é‡æ–°å»ºç½®å®¹å™¨å®‰è£ä¾è³´
docker compose build --no-cache
docker compose up -d
```

### å•é¡Œ 2ï¼šè¼¸å‡ºä»æ˜¯ç°¡é«”

**æª¢æŸ¥**ï¼š
1. ç¢ºèªèªè¨€é¸æ“‡æ˜¯ `zh`
2. æŸ¥çœ‹æ—¥èªŒæ˜¯å¦æœ‰è½‰æ›è¨Šæ¯
3. ç¢ºèª OpenCC å·²å®‰è£

**é©—è­‰å®‰è£**ï¼š
```bash
docker exec whisper-for-subs python -c "from opencc import OpenCC; print('âœ… OpenCC installed')"
```

### å•é¡Œ 3ï¼šéƒ¨åˆ†å­—è©æœªè½‰æ›

é€™æ˜¯æ­£å¸¸çš„ï¼Œå› ç‚ºï¼š
- æŸäº›å°ˆæ¥­è¡“èªå¯èƒ½ç„¡å°æ‡‰
- æŸäº›å­—è©åœ¨ç°¡ç¹é«”ä¸­ç›¸åŒ
- OpenCC ä½¿ç”¨ä¿å®ˆçš„è½‰æ›ç­–ç•¥

---

## ğŸ“ ä¿®æ”¹çš„æª”æ¡ˆ

1. **requirements.txt** - æ·»åŠ  `opencc-python-reimplemented`
2. **chinese_converter.py** - æ–°å»ºè½‰æ›æ¨¡çµ„
3. **app.py** - æ•´åˆè½‰æ›åŠŸèƒ½
4. **parallel_transcriber.py** - æ•´åˆè½‰æ›åŠŸèƒ½ï¼ˆå¤š GPUï¼‰

---

## ğŸ¯ ä½¿ç”¨å ´æ™¯

### é©ç”¨æƒ…æ³
- âœ… å°ç£ä½¿ç”¨è€…éœ€è¦ç¹é«”å­—å¹•
- âœ… é¦™æ¸¯ã€æ¾³é–€ä½¿ç”¨è€…ï¼ˆå¯èª¿æ•´ç‚º s2hkï¼‰
- âœ… éœ€è¦æ­£å¼çš„ç¹é«”ä¸­æ–‡æ–‡ä»¶
- âœ… æ•™è‚²ã€åª’é«”ã€å­—å¹•è£½ä½œ

### ä¸é©ç”¨æƒ…æ³
- âŒ æœ¬ä¾†å°±æ˜¯ç¹é«”ä¸­æ–‡çš„éŸ³è¨Šï¼ˆWhisper å¯èƒ½ç›´æ¥è¼¸å‡ºç¹é«”ï¼‰
- âŒ ä¸éœ€è¦ä¸­æ–‡çš„éŸ³è¨Šï¼ˆå…¶ä»–èªè¨€ï¼‰
- âŒ ç‰¹å®šè¦ç°¡é«”ä¸­æ–‡çš„æƒ…æ³

---

## ğŸŒŸ é¡å¤–åŠŸèƒ½

### æ¸¬è©¦è½‰æ›å™¨

å¯ä»¥ç›´æ¥æ¸¬è©¦è½‰æ›åŠŸèƒ½ï¼š

```bash
docker exec whisper-for-subs python /app/chinese_converter.py
```

æœƒé¡¯ç¤ºæ¸¬è©¦çµæœï¼š

```
ğŸ“ Testing Chinese Converter:
==================================================
åŸæ–‡: è¿™æ˜¯ç®€ä½“ä¸­æ–‡
è½‰æ›: é€™æ˜¯ç¹é«”ä¸­æ–‡
--------------------------------------------------
åŸæ–‡: æ¬¢è¿ä½¿ç”¨è¯­éŸ³è¯†åˆ«ç³»ç»Ÿ
è½‰æ›: æ­¡è¿ä½¿ç”¨èªéŸ³è­˜åˆ¥ç³»çµ±
--------------------------------------------------
```

---

## ğŸ‰ ç¸½çµ

### åŠŸèƒ½
è‡ªå‹•å°‡ Whisper è¼¸å‡ºçš„ç°¡é«”ä¸­æ–‡è½‰æ›æˆç¹é«”ä¸­æ–‡

### å„ªå‹¢
- âœ… å…¨è‡ªå‹•
- âœ… é«˜æº–ç¢ºåº¦
- âœ… å°ç£æ¨™æº–
- âœ… ç„¡æ€§èƒ½å½±éŸ¿
- âœ… å–®/å¤š GPU éƒ½æ”¯æŒ

### ä½¿ç”¨æ–¹æ³•
é¸æ“‡èªè¨€ `zh` â†’ ä¸Šå‚³éŸ³è¨Š â†’ è‡ªå‹•è½‰æ›ç¹é«”

---

**ç«‹å³éƒ¨ç½²ï¼Œäº«å—ç¹é«”ä¸­æ–‡å­—å¹•ï¼** ğŸš€

```bash
bash tmp/deploy_chinese_conversion.sh
```
